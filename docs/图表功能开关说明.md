# GLFT网格交易 - 图表功能开关说明

## 概述

为了提供更灵活的使用体验，GLFT网格交易系统现在支持通过配置文件控制实时图表功能的启用/禁用。这对于以下场景特别有用：

- 服务器环境运行（无需图形界面）
- 降低系统资源消耗
- 专注于交易逻辑而不需要实时监控
- 批量运行多个实例时避免图表冲突

## 配置方法

### 1. 环境变量配置

在项目根目录的 `.env` 文件中，找到或添加以下配置项：

```env
# 图表功能开关
enable_charts = False  # 禁用图表功能
# enable_charts = True   # 启用图表功能（默认）
```

### 2. 配置选项说明

| 配置值 | 说明 | 适用场景 |
|--------|------|----------|
| `True` | 启用实时图表功能 | 本地开发、实时监控 |
| `False` | 禁用实时图表功能 | 服务器部署、批量运行 |

**注意**：如果未设置此配置项，系统默认启用图表功能（`True`）。

## 使用效果

### 启用图表时（enable_charts = True）

```
[INFO] 启动实时监控图表...
[INFO] 图表管理器初始化完成
[INFO] 图表已启动
```

- 显示实时账户权益监控图表
- 显示累计成交量图表
- 提供可视化的交易数据展示

### 禁用图表时（enable_charts = False）

```
[INFO] 图表功能已禁用，跳过图表启动
```

- 不启动图表窗口
- 减少内存和CPU占用
- 交易逻辑正常运行
- 数据记录功能保持正常

## 性能对比

| 功能状态 | 内存占用 | CPU占用 | 启动时间 | 适用环境 |
|----------|----------|---------|----------|----------|
| 图表启用 | 较高 | 较高 | 较慢 | 本地开发 |
| 图表禁用 | 较低 | 较低 | 较快 | 服务器部署 |

## 常见使用场景

### 1. 本地开发和测试

```env
enable_charts = True
```

适合需要实时查看交易数据和账户变化的场景。

### 2. 服务器生产环境

```env
enable_charts = False
```

适合在VPS或云服务器上长期运行，专注于交易执行。

### 3. 批量运行多个交易对

```env
enable_charts = False
```

避免多个图表窗口冲突，提高系统稳定性。

## 注意事项

1. **配置修改后需要重启程序**：修改 `.env` 文件后，需要重新启动交易程序才能生效。

2. **数据记录不受影响**：无论图表功能是否启用，数据记录器都会正常工作，交易数据依然会被记录。

3. **日志输出保持完整**：禁用图表后，所有交易日志和状态信息仍会正常输出到控制台和日志文件。

4. **测试脚本不受影响**：各种测试脚本（如优化监控测试）有独立的图表控制逻辑，不受此配置影响。

## 快速切换

如需快速在图表启用/禁用之间切换，可以使用以下命令：

### Windows PowerShell

```powershell
# 禁用图表
(Get-Content .env) -replace 'enable_charts = True', 'enable_charts = False' | Set-Content .env

# 启用图表
(Get-Content .env) -replace 'enable_charts = False', 'enable_charts = True' | Set-Content .env
```

### Linux/macOS

```bash
# 禁用图表
sed -i 's/enable_charts = True/enable_charts = False/g' .env

# 启用图表
sed -i 's/enable_charts = False/enable_charts = True/g' .env
```

## 总结

图表功能开关为GLFT网格交易系统提供了更大的灵活性，用户可以根据实际需求选择是否启用实时图表功能。这个功能特别适合在不同环境下部署和运行交易系统，既保证了功能的完整性，又提供了性能优化的选择。
AS模型计算买卖报价分为两步：首先计算出一个“无差别价格”，然后围绕这个价格计算出最优的买卖价差。

第一步：计算无差别价格 (Indifference Price)

这个价格 r(s,t) 是做市商愿意持有当前头寸的理论公允价格，它会根据你手上的库存（净头寸）进行调整。

公式是这样的:


r(s,t) = s - qγσ²(T-t)

这里的每个字母代表：

s: 标的物当前的中间价（比如买一价和卖一价的平均值）。

q: 你当前的库存（净头寸）。如果是多头（买入的合约多），q是正数；如果是空头（卖出的合约多），q是负数。

γ: 做市商的风险厌恶系数，代表你有多讨厌风险。

σ²: 价格的方差，代表价格波动的剧烈程度。

(T-t): 距离收市的剩余时间。

从这个公式能看出来，如果你手上的多头库存 

q 越多，计算出的无差别价格 r 就会越低，这样你就会倾向于用更低的价格去报价，希望能把手上的多头卖掉一些 。反之亦然。

第二步：计算最优买卖价差 (Optimal Spread)

计算出无差别价格后，模型会再计算一个最优的买卖价差 δª + δᵇ。

公式是:


δª + δᵇ = (2/γ) * ln(1 + γ/k)

这里的 k 是一个跟市场流动性（订单簿厚度）有关的参数。

最终的报价公式

最后，把无差别价格和最优价差结合起来，就能得到最终的买卖报价 ：

最优买单报价 (Bid Price) = r - (δª + δᵇ) / 2

最优卖单报价 (Ask Price) = r + (δª + δᵇ) / 2

简单来说，AS模型就是先根据你手里的货（库存）算一个心理价位（无差别价格），然后再在这个心理价位上下各加减一半的价差，形成最终的买卖报价 。
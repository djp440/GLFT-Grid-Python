# GLFT网格交易实时监控功能 - 快速开始指南

## 🚀 快速体验

### 1. 测试新功能（推荐）

#### 方法一：标准版测试
```bash
python 启动监控测试.py
```

#### 方法二：优化版测试（推荐）
```bash
python 启动优化监控测试.py
```

**优化版特性：**
- ✅ 更流畅的图表性能
- ✅ 适配4K显示器的窗口大小
- ✅ 解决文字重叠问题
- ✅ 智能数据变化检测
- ✅ 优化的更新频率

**测试效果**：
- ✅ 弹出实时监控图表窗口
- ✅ 自动生成模拟交易数据
- ✅ 实时更新图表显示
- ✅ 展示所有监控功能

### 2. 集成到现有交易系统

新功能已自动集成，直接运行主程序即可：

```bash
python main.py
```

**运行效果**：
- 🔄 自动启动实时监控
- 📊 显示真实交易数据
- 📈 实时更新账户权益
- 💰 跟踪手续费和成交量

### 3. 图表功能开关控制 🔧

**适用场景**：服务器环境、批量运行、性能优化

**配置方法**：在 `.env` 文件中设置

```env
# 禁用图表功能（适合服务器环境）
enable_charts = False

# 启用图表功能（默认，适合本地开发）
enable_charts = True
```

**效果对比**：

| 配置状态 | 启动日志 | 适用场景 |
|----------|----------|----------|
| `enable_charts = True` | `启动实时监控图表...` | 本地开发、实时监控 |
| `enable_charts = False` | `图表功能已禁用，跳过图表启动` | 服务器部署、批量运行 |

**注意事项**：
- 修改配置后需要重启程序
- 数据记录功能不受影响
- 交易逻辑正常运行

详细说明请参考：[图表功能开关说明](图表功能开关说明.md)

## 📊 监控图表说明

### 第一组图表：账户权益监控

| 线条颜色 | 指标名称 | 说明 |
|---------|----------|------|
| 🔵 蓝色 | 账户权益 | 显示USDT账户权益的实时变化 |
| 🔴 红色 | 累计手续费 | 显示所有交易产生的累计手续费 |
| 🟢 绿色 | 权益+50%手续费 | 显示权益与一半手续费的总和 |

### 第二组图表：成交量监控

| 线条颜色 | 指标名称 | 说明 |
|---------|----------|------|
| 🟣 紫色 | 累计成交量 | 显示所有交易对的累计成交量 |

## 🛠️ 图表操作

### 基本操作
- **缩放**：鼠标滚轮或工具栏缩放按钮
- **平移**：按住鼠标左键拖动
- **重置视图**：点击工具栏"主页"按钮
- **保存图片**：点击工具栏"保存"按钮

### 实时数据
- 图表每2秒自动更新一次
- 显示最新的数据值标签
- 自动调整坐标轴范围
- 智能时间轴格式化

## 📁 项目文件结构

```
GLFT-Grid-Python/
├── core/
│   ├── dataRecorder.py      # 数据记录器
│   ├── chartManager.py      # 图表管理器
│   ├── tradeManager.py      # 交易管理器（已集成）
│   └── websocketManager.py  # WebSocket管理器
├── tests/
│   └── test_监控功能.py      # 监控功能测试
├── docs/
│   ├── 实时监控功能说明.md    # 详细功能说明
│   └── 快速开始指南.md       # 本文档
└── 启动监控测试.py           # 快速测试脚本
```

## ⚙️ 配置选项

### 修改图表更新频率

编辑 `core/chartManager.py`：

```python
# 修改更新间隔（毫秒）
class ChartManager:
    def __init__(self, update_interval=1000):  # 改为1秒更新
```

### 调整数据保存数量

编辑 `core/dataRecorder.py`：

```python
# 修改最大保存记录数
if len(self.account_snapshots) > 5000:  # 减少到5000条
    self.account_snapshots = self.account_snapshots[-2500:]
```

## 🔧 常见问题

### Q1: 图表窗口不显示

**解决方案**：
```bash
# 安装tkinter支持
pip install tk

# 或者安装完整的matplotlib
pip install matplotlib[all]
```

### Q2: 中文显示乱码

**解决方案**：
- Windows：确保安装了"微软雅黑"字体
- Linux：安装中文字体包
- macOS：系统自带中文字体支持

### Q3: 程序运行缓慢

**解决方案**：
1. 增加图表更新间隔（改为3-5秒）
2. 减少历史数据保存数量
3. 关闭不必要的日志输出

### Q4: 内存占用过高

**解决方案**：
1. 定期重启程序
2. 减少数据保存数量
3. 关闭图表功能（如不需要）

## 📈 数据说明

### 权益计算
- **账户权益**：当前USDT余额总额
- **累计手续费**：所有交易产生的手续费总和
- **权益+50%手续费**：权益 + (累计手续费 × 0.5)

### 成交量统计
- **累计成交量**：所有交易对的成交数量总和
- **按交易对分类**：可在数据记录器中查看各交易对详情

## 🎯 使用建议

### 1. 监控策略
- 关注权益变化趋势
- 监控手续费占比
- 观察成交量分布

### 2. 性能优化
- 生产环境建议3-5秒更新间隔
- 定期保存重要数据
- 避免长时间连续运行

### 3. 数据分析
- 定期导出历史数据
- 分析交易效率
- 优化交易参数

## 📞 技术支持

如遇到问题，请：

1. 查看日志文件：`logs/` 目录
2. 运行测试脚本：`python 启动监控测试.py`
3. 查看详细文档：`docs/实时监控功能说明.md`
4. 检查依赖安装：`pip install -r requirements.txt`

---

**🎉 恭喜！您已成功启用GLFT网格交易实时监控功能！**

现在您可以：
- ✅ 实时监控交易表现
- ✅ 跟踪账户权益变化
- ✅ 分析手续费和成交量
- ✅ 优化交易策略